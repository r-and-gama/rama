## ----setup, include = FALSE----------------------------------------------
knitr::opts_chunk$set(
  cache = TRUE,
  collapse = TRUE,
  comment = "#>"
)

## ------------------------------------------------------------------------
library(rama)

## ------------------------------------------------------------------------
gaml_file <- system.file("examples", "sir.gaml", package = "rama")

## ------------------------------------------------------------------------
exp1 <- load_experiment("sir", gaml_file, "sir")

## ------------------------------------------------------------------------
exp1

## ------------------------------------------------------------------------
class(exp1)

## ------------------------------------------------------------------------
df <- data.frame("S0" = 999, "I0" = 1, "R0" = 0, "beta" = 1.5,
                 "gama" = 0.15, "S" = 1, "I" = 1, "R" = 1,
                 "a" = 1000, "b" = 1)

## ------------------------------------------------------------------------
exp2 <- experiment( 
           parameters = c("S0", "I0", "R0", "beta", "gama"),
           obsrates = c("S", "I", "R"), tmax = "a", seed = "b",
           experiment = "sir", model = gaml_file, df = df)

## ------------------------------------------------------------------------
exp2

## ------------------------------------------------------------------------
df <- data.frame("S0" = c(999, 990), "I0" = c(1, 2), "R0" = 0, "beta" = 1.5,
                 "gama" = 5, "S" = 1, "I" = 1, "R" = 1,
                 "a" = 1000, "b" = 1)
exp3 <- experiment(parameters = c(1:5),
           obsrates = c(6:8), tmax = "a", seed = "b",
           experiment = "sir", model = gaml_file, df = df)

## ------------------------------------------------------------------------
exp3

## ------------------------------------------------------------------------
df <- expand.grid(S0 = c(900, 950, 999),
               I0 = c(100, 50, 1),
               R0 = 0,
               beta = 1.5,
               gamma = .15,
               S = 1,
               I = 1,
               R = 1,
               tmax = 1000,
               seed = 1)

exp4 <- experiment(parameters = c(1:5),
           obsrates = c(6:8), tmax = "tmax", seed = "seed",
           experiment = "sir", model = gaml_file, df = df)

## ------------------------------------------------------------------------
exp4

## ------------------------------------------------------------------------
df <- data.frame(
  S0 = c(700, 800, 900, 950, 999),
  R0 = 0,
  beta = 1.5,
  gamma = .15,
  S = 1,
  I = 1,
  tmax = 2500,
  seed = sample(5)
)

## ------------------------------------------------------------------------
df$I0 <- 1000 - df$S0

## ------------------------------------------------------------------------
df

## ----eval = F, include = F-----------------------------------------------
#  exp5 <- experiment(parameters = c("S0", "R0", "beta", "gamma"),
#             obsrates = c("S", "I"), tmax = "tmax", seed = "seed",
#             experiment = "sir", model = gaml_file, df = df)

## ------------------------------------------------------------------------
nrow(exp4)

## ------------------------------------------------------------------------
exp1

## ------------------------------------------------------------------------
exp5 <- repl(exp1, 10)

## ------------------------------------------------------------------------
exp5

## ------------------------------------------------------------------------
exp5$seed <- sample(10)

## ------------------------------------------------------------------------
exp5

## ------------------------------------------------------------------------
parameters(exp5)

## ------------------------------------------------------------------------
obs_rates(exp5)

## ------------------------------------------------------------------------
exp5$seed
exp5$seed <- sample(10)
exp5

## ------------------------------------------------------------------------
exp5$tmax
exp5$tmax <- 3543
exp5

## ------------------------------------------------------------------------
exp5$r_R <- NULL
exp5$r_I <- 2

## ------------------------------------------------------------------------
exp5

## ----eval = FALSE--------------------------------------------------------
#  output <- run_experiment(exp1)

## ----cleaning, include = FALSE-------------------------------------------
unlink("sir", TRUE)

